<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Tower Defence</title>
  <!-- ì „ì²´ ê²Œì„ í™”ë©´ì— ì ìš©ë˜ëŠ” ê³µí†µ ìŠ¤íƒ€ì¼ ì‹œíŠ¸ -->
  <link rel="stylesheet" href="style.css">
  <!-- <style>
    /* API í‚¤ ì…ë ¥ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    #api-key-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    #api-key-modal.hidden {
      display: none;
    }
    .modal-content {
      background: #2f3136;
      padding: 30px;
      border-radius: 12px;
      text-align: center;
      max-width: 500px;
      color: #fff;
    }
    .modal-content h2 {
      color: #ffd700;
      margin-bottom: 15px;
    }
    .modal-content p {
      color: #aaa;
      margin-bottom: 20px;
      font-size: 14px;
    }
    .modal-content input {
      width: 100%;
      padding: 12px;
      border: 2px solid #444;
      border-radius: 6px;
      background: #1a1a1a;
      color: #fff;
      font-size: 14px;
      margin-bottom: 15px;
      box-sizing: border-box;
    }
    .modal-content input:focus {
      border-color: #5865f2;
      outline: none;
    }
    .modal-content button {
      background: #5865f2;
      color: #fff;
      border: none;
      padding: 12px 30px;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      margin: 5px;
    }
    .modal-content button:hover {
      background: #4752c4;
    }
    .modal-content .skip-btn {
      background: #444;
    }
    .modal-content .skip-btn:hover {
      background: #555;
    }
    /* API ìƒíƒœ í‘œì‹œ */
    #api-status {
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 12px;
      margin-left: 10px;
    }
    #api-status.connected {
      background: #43b581;
      color: #fff;
    }
    #api-status.disconnected {
      background: #f04747;
      color: #fff;
    }
  </style> -->
</head>
<body>
  <!-- API í‚¤ ì…ë ¥ ëª¨ë‹¬ -->
  <div id="api-key-modal">
    <div class="modal-content">
      <h2>ğŸ¤– AI Tower Defence</h2>
      <p>Claude API í‚¤ë¥¼ ì…ë ¥í•˜ë©´ AIê°€ ì „ëµì ìœ¼ë¡œ í”Œë ˆì´í•©ë‹ˆë‹¤.<br>
         í‚¤ê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ AIë¡œ í”Œë ˆì´ë©ë‹ˆë‹¤.</p>
      <input type="password" id="api-key-input" placeholder="sk-ant-api03-..." />
      <div>
        <button id="save-api-key-btn">API í‚¤ ì €ì¥</button>
        <button class="skip-btn" id="skip-api-key-btn">ê±´ë„ˆë›°ê¸°</button>
      </div>
      <p style="font-size:12px; margin-top:15px; color:#666;">
        * API í‚¤ëŠ” ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë˜ë©° ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
      </p>
    </div>
  </div>

  <!-- ê²Œì„ ì „ì²´ë¥¼ ê°ì‹¸ëŠ” ìµœìƒìœ„ ì»¨í…Œì´ë„ˆ -->
  <div id="game-wrapper">

    <!-- ìƒë‹¨ ì •ë³´ íŒ¨ë„: ë¦¬ì…‹ ë²„íŠ¼, ë””ë²„ê·¸ ë²„íŠ¼, ë¼ìš´ë“œ/ìì›/ì¸êµ¬/ê±´ë¬¼ ì •ë³´ í‘œì‹œ -->
    <div id="top-info-panel">
      <!-- ê²Œì„ ì§„í–‰ ìƒíƒœë¥¼ ì™„ì „íˆ ì´ˆê¸°í™”í•˜ëŠ” ë²„íŠ¼ -->
      <button id="reset-game-btn" class="reset-btn">Reset</button>

      <!-- API í‚¤ ì„¤ì • ë²„íŠ¼ -->
      <button id="change-api-key-btn" class="reset-btn" style="background:#5865f2; border-color:#4752c4;">
        API í‚¤ ì„¤ì •
      </button>
      <span id="api-status" class="disconnected">AI OFF</span>

      <!-- ë¼ìš´ë“œ í‘œì‹œ ì˜ì—­ -->
      <div class="info-item">
        <span class="info-label">ë¼ìš´ë“œ</span>
        <!-- í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ë¼ìš´ë“œ ë²ˆí˜¸ -->
        <span class="info-value" id="round-value">1</span>
      </div>

      <!-- ìì› í‘œì‹œ ì˜ì—­ -->
      <div class="info-item">
        <span class="info-label">ìì›</span>
        <!-- í”Œë ˆì´ì–´ê°€ í˜„ì¬ ë³´ìœ í•œ ìì›ëŸ‰ -->
        <span class="info-value" id="resource-value">500</span>
      </div>

      <!-- ì¸êµ¬ìˆ˜ í‘œì‹œ ì˜ì—­ -->
      <div class="info-item">
        <span class="info-label">ì¸êµ¬ìˆ˜</span>
        <!-- í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ì¸êµ¬ìˆ˜ / ìµœëŒ€ ì¸êµ¬ìˆ˜ -->
        <span class="info-value" id="population-value">0 / 10</span>
      </div>

      <!-- ê±´ë¬¼ ìˆ˜ í‘œì‹œ ì˜ì—­ -->
      <div class="info-item">
        <span class="info-label">ê±´ë¬¼</span>
        <!-- í˜„ì¬ ê±´ì„¤ëœ ê±´ë¬¼ ìˆ˜ / ê±´ì¶• ê°€ëŠ¥ ìµœëŒ€ ê±´ë¬¼ ìˆ˜ -->
        <span class="info-value" id="structure-count-value">2 / 10</span>
      </div>
    </div>

    <!-- ë©”ì¸ ê²Œì„ ì˜ì—­: ì™¼ìª½ ë§µ ìº”ë²„ìŠ¤ + ì˜¤ë¥¸ìª½ ì‚¬ì´ë“œë°” -->
    <div id="game-container">

      <!-- ì™¼ìª½ ì„¹ì…˜: ì‹¤ì œ ê²Œì„ ë§µê³¼ ìœ ë‹›, êµ¬ì¡°ë¬¼ì„ ê·¸ë¦¬ëŠ” ìº”ë²„ìŠ¤ ì˜ì—­ -->
      <div id="left-section">
        <!-- HTML5 ìº”ë²„ìŠ¤: ë§µ íƒ€ì¼, ê¸°ì§€, êµ¬ì¡°ë¬¼, ìœ ë‹›ì„ ëª¨ë‘ ì´ ìœ„ì— ë Œë”ë§ -->
        <canvas id="cv" width="960" height="640"></canvas>
      </div>

      <!-- ì˜¤ë¥¸ìª½ ì‚¬ì´ë“œë°”: ê±´ì„¤ ë©”ë‰´, êµ¬ì¡°ë¬¼ ìƒì„¸ ì •ë³´, ë¼ìš´ë“œ ì œì–´ ë²„íŠ¼ -->
      <div id="sidebar">
        <!-- ì‚¬ì´ë“œë°” ìƒë‹¨ ì œëª©: ê¸°ë³¸ ìƒíƒœì—ì„œëŠ” 'ê±´ì„¤ ë©”ë‰´' í‘œì‹œ -->
        <div id="sidebar-header">ê±´ì„¤ ë©”ë‰´</div>

        <!-- êµ¬ì¡°ë¬¼ ìƒì„¸ íŒ¨ë„
             - ë§µì—ì„œ íŠ¹ì • êµ¬ì¡°ë¬¼ì„ í´ë¦­í–ˆì„ ë•Œë§Œ í‘œì‹œë˜ëŠ” ì˜ì—­
             - ê¸°ë³¸ ìƒíƒœì—ì„œëŠ” ìˆ¨ê¹€ (CSSì—ì„œ display ì œì–´) -->
        <div id="structure-panel">
          <!-- êµ¬ì¡°ë¬¼ ìƒì„¸ íŒ¨ë„ ìƒë‹¨ ì œëª© (êµ¬ì¡°ë¬¼ ì´ë¦„ì´ ë“¤ì–´ê°) -->
          <div class="panel-header" id="structure-panel-header">êµ¬ì¡°ë¬¼</div>

          <!-- ì„ íƒëœ êµ¬ì¡°ë¬¼ì˜ ì´ë¦„ ë° ì„¤ëª…ì„ ë³´ì—¬ì£¼ëŠ” ê³µí†µ ì •ë³´ ì˜ì—­ -->
          <div
            id="structure-info"
            style="background:#36393f; padding:12px; margin-bottom:10px; border-radius:6px;"
          >
            <!-- êµ¬ì¡°ë¬¼ ì´ë¦„ (ì˜ˆ: ë³‘ì˜, ì£¼ê±°ì§€ ë“±) -->
            <div
              id="structure-name"
              style="color:#ffd700; font-weight:bold; margin-bottom:5px;"
            ></div>
            <!-- êµ¬ì¡°ë¬¼ ì„¤ëª… (ê¸°ëŠ¥ ìš”ì•½ í…ìŠ¤íŠ¸) -->
            <div
              id="structure-description"
              style="color:#aaa; font-size:13px;"
            ></div>
          </div>

          <!-- ìƒì‚° ëŒ€ê¸°ì—´ ì˜ì—­
               - ë³‘ì˜ êµ¬ì¡°ë¬¼ì„ ì„ íƒí–ˆì„ ë•Œë§Œ í‘œì‹œë¨ (ê¸°ë³¸ display:none)
               - í˜„ì¬ ìƒì‚° ì¤‘ì¸ ìœ ë‹›ê³¼ ëŒ€ê¸° ì¤‘ì¸ ìœ ë‹›ì„ ìµœëŒ€ 3ì¹¸ê¹Œì§€ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„ -->
          <div id="production-queue-container" style="display:none;">
            <div
              style="color:#ffd700; font-weight:bold; margin:10px 0 8px 0;"
            >
              ìƒì‚° ëŒ€ê¸°ì—´
            </div>
            
            <!-- ìƒì‚° ìŠ¬ë¡¯ 3ì¹¸ ê³ ì • ë ˆì´ì•„ì›ƒ -->
            <div style="display:flex; gap:10px; margin-bottom:10px;">
              <!-- 1ë²ˆ ìŠ¬ë¡¯: í˜„ì¬ ìƒì‚° ì¤‘ì¸ ìœ ë‹› ë˜ëŠ” ë¹„ì–´ ìˆëŠ” ìŠ¬ë¡¯ -->
              <div class="production-slot" data-slot="0">
                <!-- ë¹„ì–´ ìˆì„ ë•Œ í‘œì‹œë˜ëŠ” ê¸°ë³¸ í…ìŠ¤íŠ¸ (ìŠ¬ë¡¯ ë²ˆí˜¸) -->
                <div class="slot-empty">1</div>
              </div>

              <!-- 2ë²ˆ ìŠ¬ë¡¯: ìƒì‚° ëŒ€ê¸° ì¤‘ì¸ ìœ ë‹› ë˜ëŠ” ë¹„ì–´ ìˆëŠ” ìŠ¬ë¡¯ -->
              <div class="production-slot" data-slot="1">
                <div class="slot-empty">2</div>
              </div>

              <!-- 3ë²ˆ ìŠ¬ë¡¯: ìƒì‚° ëŒ€ê¸° ì¤‘ì¸ ìœ ë‹› ë˜ëŠ” ë¹„ì–´ ìˆëŠ” ìŠ¬ë¡¯ -->
              <div class="production-slot" data-slot="2">
                <div class="slot-empty">3</div>
              </div>
            </div>
          </div>

          <!-- ìœ ë‹› ìƒì‚° ë²„íŠ¼ ì˜ì—­
               - ë³‘ì˜ì„ ì„ íƒí–ˆì„ ë•Œë§Œ ë³´ì´ëŠ” ì˜ì—­ (display:none â†’ block)
               - ê° ë²„íŠ¼ì€ íŠ¹ì • ìœ ë‹› íƒ€ì…(melee, ranged, tank)ì„ ìƒì‚° íì— ì¶”ê°€ -->
          <div id="unit-production" style="display:none;">
            <!-- ê·¼ì ‘ ìœ ë‹› ìƒì‚° ë²„íŠ¼ -->
            <div class="unit-button" data-unit="melee">
              <!-- ë²„íŠ¼ì— í‘œì‹œë˜ëŠ” ê·¼ì ‘ ìœ ë‹› ì•„ì´ì½˜ -->
              <img class="unit-button-icon" src="images/unit_melee_move_1.png">
              <!-- ìœ ë‹› ì´ë¦„ê³¼ ë¹„ìš©/ì¸êµ¬ ì •ë³´ë¥¼ í‘œì‹œí•˜ëŠ” í…ìŠ¤íŠ¸ ì˜ì—­ -->
              <div class="unit-button-info">
                <div class="unit-button-name"></div>
                <div class="unit-button-cost"></div>
              </div>
            </div>

            <!-- ì›ê±°ë¦¬(ë§ˆë²•ì‚¬) ìœ ë‹› ìƒì‚° ë²„íŠ¼ -->
            <div class="unit-button" data-unit="ranged">
              <img class="unit-button-icon" src="images/unit_ranged_move_1.png">
              <div class="unit-button-info">
                <div class="unit-button-name"></div>
                <div class="unit-button-cost"></div>
              </div>
            </div>

            <!-- íƒ±í¬í˜• ìœ ë‹› ìƒì‚° ë²„íŠ¼ -->
            <div class="unit-button" data-unit="tank">
              <img class="unit-button-icon" src="images/unit_tank_move_1.png">
              <div class="unit-button-info">
                <div class="unit-button-name"></div>
                <div class="unit-button-cost"></div>
              </div>
            </div>
          </div> <!-- unit-production ë -->

          <!-- ì„ íƒëœ êµ¬ì¡°ë¬¼ì„ íŒë§¤í•˜ëŠ” ë²„íŠ¼
               - í´ë¦­ ì‹œ í•´ë‹¹ êµ¬ì¡°ë¬¼ì„ ì œê±°í•˜ê³ , êµ¬ì¡°ë¬¼ ë¹„ìš©ì˜ 50%ë¥¼ ìì›ìœ¼ë¡œ í™˜ë¶ˆ -->
          <button class="sell-button" id="sell-structure">
            êµ¬ì¡°ë¬¼ íŒë§¤ (50% í™˜ë¶ˆ)
          </button>
          <!-- íŒ¨ë„ ë‹«ê¸°ìš© ë³„ë„ ë²„íŠ¼ì€ ì—†ê³ , ESC í‚¤ë¡œ íŒ¨ë„ì„ ë‹«ë„ë¡ ì„¤ê³„ë¨ -->
        </div> <!-- structure-panel ë -->

        <!-- ê¸°ë³¸ ê±´ì„¤ ëª©ë¡
             - ì–´ë–¤ êµ¬ì¡°ë¬¼ë„ ì„ íƒí•˜ì§€ ì•Šì•˜ì„ ë•Œ í‘œì‹œë˜ëŠ” ê¸°ë³¸ ê±´ì„¤ ë©”ë‰´ -->
        <div id="structure-list">
          <!-- ë³‘ì˜ ê±´ì„¤ ì¹´ë“œ -->
          <div class="item-card" data-id="barracks">
            <!-- ê±´ì„¤ ê°€ëŠ¥í•œ ë³‘ì˜ì˜ ë¯¸ë¦¬ë³´ê¸° ì•„ì´ì½˜ -->
            <img class="item-icon" src="images/structure_barracks.png">
            <div class="item-info">
              <!-- êµ¬ì¡°ë¬¼ ì´ë¦„ (ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì±„ì›Œì§) -->
              <div class="item-name"></div>
              <!-- êµ¬ì¡°ë¬¼ ì„¤ëª… (ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì±„ì›Œì§) -->
              <div class="item-description"></div>
              <!-- êµ¬ì¡°ë¬¼ ë¹„ìš© (ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì±„ì›Œì§) -->
              <div class="item-cost"></div>
            </div>
          </div>

          <!-- ì£¼ê±°ì§€(ì¸êµ¬ìˆ˜ ì¦ê°€ìš©) ê±´ì„¤ ì¹´ë“œ -->
          <div class="item-card" data-id="population">
            <img class="item-icon" src="images/structure_population.png">
            <div class="item-info">
              <div class="item-name"></div>
              <div class="item-description"></div>
              <div class="item-cost"></div>
            </div>
          </div>

          <!-- í¬íƒ‘(ê³µê²©ìš© ë°©ì–´ êµ¬ì¡°ë¬¼) ê±´ì„¤ ì¹´ë“œ -->
          <div class="item-card" data-id="turret">
            <img class="item-icon" src="images/structure_turret.png">
            <div class="item-info">
              <div class="item-name"></div>
              <div class="item-description"></div>
              <div class="item-cost"></div>
            </div>
          </div>

          <!-- ìì› ì±„ì·¨ êµ¬ì¡°ë¬¼ ê±´ì„¤ ì¹´ë“œ -->
          <div class="item-card" data-id="resource">
            <img class="item-icon" src="images/structure_resource.png">
            <div class="item-info">
              <div class="item-name"></div>
              <div class="item-description"></div>
              <div class="item-cost"></div>
            </div>
          </div>
        </div> <!-- structure-list ë -->

        <!-- ë¼ìš´ë“œ ì œì–´ ë²„íŠ¼ ì˜ì—­
             - ë¼ìš´ë“œ ì‹œì‘/ì •ì§€ë¥¼ ì œì–´í•˜ë©°, ìœ ë‹› ìƒì‚° ê°€ëŠ¥ ì—¬ë¶€ì—ë„ ì˜í–¥ì„ ì¤Œ -->
        <div id="round-controls">
          <!-- ë¼ìš´ë“œ ì‹œì‘ ë²„íŠ¼: ëˆŒëŸ¬ì•¼ ìœ ë‹› ìƒì‚°ê³¼ ì „íˆ¬ ì§„í–‰ì´ í™œì„±í™”ë¨ -->
          <button id="start-round-btn" class="round-btn start">
            Start Round
          </button>
          <!-- ë¼ìš´ë“œ ì •ì§€ ë²„íŠ¼: ë¼ìš´ë“œê°€ ì‹œì‘ë˜ê¸° ì „ì—ëŠ” ë¹„í™œì„±í™” ìƒíƒœ -->
          
        </div>

      </div> <!-- sidebar ë -->
    </div> <!-- game-container ë -->

  </div> <!-- game-wrapper ë -->

  <!-- ê²Œì„ ë°ì´í„° ë° ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ (ìƒìˆ˜, ë§µ, êµ¬ì¡°ë¬¼/ìœ ë‹› ì •ë³´ ë“± ì •ì˜) -->
  <script src="data.js"></script>
   <!-- ê²Œì„ ë°ì´í„° ë° ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ (ìƒìˆ˜, ë§µ, êµ¬ì¡°ë¬¼/ìœ ë‹› ì •ë³´ ë“± ì •ì˜) -->
  <script src="gamefunction.js"></script>
    <!-- ê²Œì„ ë¡œì§ ë° ìº”ë²„ìŠ¤ ë Œë”ë§ ìŠ¤í¬ë¦½íŠ¸ (ìœ ë‹› ì´ë™, ìƒì‚°, ì „íˆ¬ ì²˜ë¦¬ ë“±) -->
  <script src="game.js"></script>


  <!-- UI ì´ë²¤íŠ¸ ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ (í´ë¦­, í‚¤ë³´ë“œ ì…ë ¥, ë²„íŠ¼ ë™ì‘ ë“±) -->
  <script src="ui.js"></script>
</body>
</html>