/* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘                         AI TOWER DEFENCE                                  â•‘
   â•‘                    SOUND.JS - BGM + íš¨ê³¼ìŒ ì‹œìŠ¤í…œ                           â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
   /*
    1. SoundManager í´ë˜ìŠ¤
    â””â”€ 1-1. ì´ˆê¸°í™”

    2. BGM ê´€ë ¨
      â”œâ”€ 2-1. BGM ì¬ìƒ ì‹œì‘
      â”œâ”€ 2-2. ë‹¤ìŒ BGM ì¬ìƒ
      â”œâ”€ 2-3. BGM ì •ì§€ / ì¼ì‹œì •ì§€ / ì¬ê°œ
      â””â”€ 2-4. BGM ë³¼ë¥¨ ì„¤ì •

    3. íš¨ê³¼ìŒ ê´€ë ¨
      â”œâ”€ 3-1. ìµœì¢… ë³¼ë¥¨ ê³„ì‚°
      â”œâ”€ 3-2. íš¨ê³¼ìŒ ì¬ìƒ (ë‹¨ì¼)
      â”œâ”€ 3-3. íš¨ê³¼ìŒ ì¬ìƒ (ë™ì‹œ ì—¬ëŸ¬ ë²ˆ)
      â””â”€ 3-4. íŠ¹ì • ì‚¬ìš´ë“œ ë³¼ë¥¨ ì„¤ì •/ê°€ì ¸ì˜¤ê¸°

    4. ì „ì²´ ì œì–´
      â”œâ”€ 4-1. ì „ì²´ ë³¼ë¥¨ ì„¤ì •
      â”œâ”€ 4-2. ì‚¬ìš´ë“œ ON/OFF í† ê¸€
      â””â”€ 4-3. UI ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸

    5. ì „ì—­ ì¸ìŠ¤í„´ìŠ¤ ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      â”œâ”€ 5-1. í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
      â””â”€ 5-2. ì²« í´ë¦­ ì‹œ BGM ìë™ ì¬ìƒ
   */


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   1. SoundManager í´ë˜ìŠ¤
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

class SoundManager {
  constructor() {
    this.sounds       = {};
    this.enabled      = true;
    this.masterVolume = 1.0;
    this.loaded       = false;
    
    // BGM ê´€ë ¨
    this.bgmList        = [];
    this.currentBgm     = null;
    this.currentBgmIndex = 0;
    this.bgmVolume      = 0.3;
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     1-1. ì´ˆê¸°í™”
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  init() {
    // íš¨ê³¼ìŒ ì •ì˜
    const soundConfig = {
      // ë¼ìš´ë“œ ê´€ë ¨
      round_start:        { path: 'sounds/round_start.mp3',        volume: 0.1  },
      round_end:          { path: 'sounds/round_end.mp3',          volume: 0.07 },
      
      // ìœ ë‹› ê³µê²©
      attack_melee:       { path: 'sounds/attack_melee.mp3',       volume: 0.07 },
      attack_ranged:      { path: 'sounds/attack_ranged.mp3',      volume: 0.07 },
      attack_tank:        { path: 'sounds/attack_tank.mp3',        volume: 0.03 },
      attack_turret:      { path: 'sounds/attack_turret.mp3',      volume: 0.1  },
      
      // ìœ ë‹› ì‚¬ë§
      remove_melee:       { path: 'sounds/remove_melee.mp3',       volume: 0.2  },
      remove_ranged:      { path: 'sounds/remove_ranged.mp3',      volume: 0.15 },
      remove_tank:        { path: 'sounds/remove_tank.mp3',        volume: 0.2  },
      
      // ìì›/êµ¬ì¡°ë¬¼
      money:              { path: 'sounds/money.mp3',              volume: 0.1  },
      resource_structure: { path: 'sounds/resource_structure.mp3', volume: 0.2  },
      
      // ìœ ë‹› ìŠ¤í°/ì´ë™
      unit_move_1:        { path: 'sounds/unit_move.mp3',          volume: 0.3  },
      unit_move_2:        { path: 'sounds/unit_move2.mp3',         volume: 0.1  }
    };

    // íš¨ê³¼ìŒ ë¡œë“œ
    for (const [name, config] of Object.entries(soundConfig)) {
      this.sounds[name] = {
        audio:  new Audio(config.path),
        volume: config.volume
      };
      this.sounds[name].audio.load();
    }

    // BGM ë¡œë“œ
    this.bgmList = [
      new Audio('sounds/bgm1.mp3'),
      new Audio('sounds/bgm2.mp3'),
      new Audio('sounds/bgm3.mp3'),
      new Audio('sounds/bgm4.mp3')
    ];
    
    // BGM ì„¤ì •
    this.bgmList.forEach((bgm, index) => {
      bgm.loop   = false;
      bgm.volume = this.bgmVolume * this.masterVolume;
      bgm.load();
      
      // ê³¡ì´ ëë‚˜ë©´ ë‹¤ìŒ ê³¡ ì¬ìƒ
      bgm.addEventListener('ended', () => {
        this._playNextBgm();
      });
    });

    this.loaded = true;
    console.log('ğŸ”Š ì‚¬ìš´ë“œ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');
    console.log(`ğŸµ BGM ${this.bgmList.length}ê³¡ ë¡œë“œë¨`);
  }


  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     2. BGM ê´€ë ¨
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     2-1. BGM ì¬ìƒ ì‹œì‘
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  playBgm() {
    if (!this.enabled || !this.loaded) return;
    if (this.bgmList.length === 0) return;
    
    // ì´ë¯¸ ì¬ìƒ ì¤‘ì´ë©´ ë¬´ì‹œ
    if (this.currentBgm && !this.currentBgm.paused) return;
    
    // ëœë¤ìœ¼ë¡œ ì‹œì‘
    this.currentBgmIndex = Math.floor(Math.random() * this.bgmList.length);
    
    this.currentBgm        = this.bgmList[this.currentBgmIndex];
    this.currentBgm.volume = this.bgmVolume * this.masterVolume;
    this.currentBgm.play().catch(() => {
      console.log('BGM ì¬ìƒ ëŒ€ê¸° ì¤‘... (ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í•„ìš”)');
    });
    
    console.log(`ğŸµ BGM ${this.currentBgmIndex + 1} ì¬ìƒ`);
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     2-2. ë‹¤ìŒ BGM ì¬ìƒ
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  _playNextBgm() {
    if (!this.enabled) return;
    
    this.currentBgmIndex   = (this.currentBgmIndex + 1) % this.bgmList.length;
    this.currentBgm        = this.bgmList[this.currentBgmIndex];
    this.currentBgm.volume = this.bgmVolume * this.masterVolume;
    this.currentBgm.play().catch(() => {});
    
    console.log(`ğŸµ BGM ${this.currentBgmIndex + 1} ì¬ìƒ`);
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     2-3. BGM ì •ì§€ / ì¼ì‹œì •ì§€ / ì¬ê°œ
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  stopBgm() {
    if (this.currentBgm) {
      this.currentBgm.pause();
      this.currentBgm.currentTime = 0;
    }
  }

  pauseBgm() {
    if (this.currentBgm) {
      this.currentBgm.pause();
    }
  }

  resumeBgm() {
    if (this.currentBgm && this.enabled) {
      this.currentBgm.play().catch(() => {});
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     2-4. BGM ë³¼ë¥¨ ì„¤ì •
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  setBgmVolume(vol) {
    this.bgmVolume = Math.max(0, Math.min(1, vol));
    this.bgmList.forEach(bgm => {
      bgm.volume = this.bgmVolume * this.masterVolume;
    });
  }


  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     3. íš¨ê³¼ìŒ ê´€ë ¨
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     3-1. ìµœì¢… ë³¼ë¥¨ ê³„ì‚°
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  _getFinalVolume(name) {
    const sound = this.sounds[name];
    if (!sound) return 0;
    return sound.volume * this.masterVolume;
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     3-2. íš¨ê³¼ìŒ ì¬ìƒ (ë‹¨ì¼)
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  play(name) {
    if (!this.enabled || !this.loaded) return;
    
    const sound = this.sounds[name];
    if (!sound) {
      console.warn(`ì‚¬ìš´ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ${name}`);
      return;
    }

    sound.audio.currentTime = 0;
    sound.audio.volume      = this._getFinalVolume(name);
    sound.audio.play().catch(() => {});
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     3-3. íš¨ê³¼ìŒ ì¬ìƒ (ë™ì‹œ ì—¬ëŸ¬ ë²ˆ ê°€ëŠ¥)
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  playMultiple(name) {
    if (!this.enabled || !this.loaded) return;
    
    const sound = this.sounds[name];
    if (!sound) return;

    const newAudio  = new Audio(sound.audio.src);
    newAudio.volume = this._getFinalVolume(name);
    newAudio.play().catch(() => {});
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     3-4. íŠ¹ì • ì‚¬ìš´ë“œ ë³¼ë¥¨ ì„¤ì •/ê°€ì ¸ì˜¤ê¸°
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  setVolume(name, vol) {
    const sound = this.sounds[name];
    if (!sound) return;
    sound.volume = Math.max(0, Math.min(1, vol));
  }

  getVolume(name) {
    const sound = this.sounds[name];
    return sound ? sound.volume : 0;
  }


  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     4. ì „ì²´ ì œì–´
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     4-1. ì „ì²´ ë³¼ë¥¨ ì„¤ì •
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  setMasterVolume(vol) {
    this.masterVolume = Math.max(0, Math.min(1, vol));
    
    // BGM ë³¼ë¥¨ë„ ì—…ë°ì´íŠ¸
    this.bgmList.forEach(bgm => {
      bgm.volume = this.bgmVolume * this.masterVolume;
    });
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     4-2. ì‚¬ìš´ë“œ ON/OFF í† ê¸€
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  toggle() {
    this.enabled = !this.enabled;
    
    if (this.enabled) {
      this.resumeBgm();
    } else {
      this.pauseBgm();
    }
    
    this._updateButtonUI();
    console.log(`ì‚¬ìš´ë“œ ${this.enabled ? 'ON' : 'OFF'}`);
    return this.enabled;
  }

  enable() {
    this.enabled = true;
    this.resumeBgm();
    this._updateButtonUI();
  }

  disable() {
    this.enabled = false;
    this.pauseBgm();
    this._updateButtonUI();
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     4-3. UI ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  _updateButtonUI() {
    const btn = document.getElementById('sound-toggle-btn');
    if (!btn) return;

    if (this.enabled) {
      btn.innerHTML = `<span class="icon">ğŸ”Š</span> Sound`;
      btn.classList.remove("sound-off");
    } else {
      btn.innerHTML = `<span class="icon">ğŸ”‡</span> Sound`;
      btn.classList.add("sound-off");
    }
  }
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   5. ì „ì—­ ì¸ìŠ¤í„´ìŠ¤ ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

// ì „ì—­ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
const soundManager = new SoundManager();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   5-1. í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
document.addEventListener('DOMContentLoaded', () => {
  soundManager.init();
  soundManager._updateButtonUI();

  const soundBtn = document.getElementById('sound-toggle-btn');
  soundBtn.addEventListener("click", () => {
    soundManager.toggle();
  });
});

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   5-2. ì²« í´ë¦­ ì‹œ BGM ìë™ ì¬ìƒ ì‹œì‘
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
document.addEventListener('click', (e) => {
  // Sound ë²„íŠ¼ì€ ì œì™¸ (í† ê¸€ ì§í›„ enabledê°€ ë³€ê²½ë˜ê¸° ë•Œë¬¸)
  if (e.target.id === "sound-toggle-btn") return;

  if (soundManager.loaded) {
    soundManager.playBgm();
  }
}, { once: true });